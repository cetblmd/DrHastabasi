<!DOCTYPE html>
<html lang='tr'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Görünüm Ayarları</title>
    <link href='https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap' rel='stylesheet'>
    <style>
        :root{
            --background: hsl(210, 30%, 98%);
            --foreground: hsl(210, 40%, 10%);
            --card: hsl(0, 0%, 100%);
            --card-foreground: hsl(210, 40%, 10%);
            --primary: hsl(199, 89%, 48%);
            --primary-foreground: hsl(0, 0%, 100%);
            --secondary: hsl(168, 76%, 42%);
            --secondary-foreground: hsl(0, 0%, 100%);
            --muted: hsl(210, 20%, 96%);
            --muted-foreground: hsl(210, 15%, 45%);
            --accent: hsl(199, 70%, 94%);
            --accent-foreground: hsl(199, 89%, 30%);
            --border: hsl(210, 25%, 90%);
            --gradient-primary: linear-gradient(135deg, hsl(199, 89%, 48%) 0%, hsl(168, 76%, 42%) 100%);
            --gradient-hero: linear-gradient(160deg, hsl(210, 30%, 98%) 0%, hsl(199, 70%, 94%) 50%, hsl(168, 60%, 94%) 100%);
            --shadow-soft: 0 4px 20px -4px hsla(199, 60%, 50%, 0.15);
            --shadow-glow: 0 8px 32px -8px hsla(199, 89%, 48%, 0.25);
            --radius: 0.75rem;
        }

        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body{
            height: 100%;
        }

        body{
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--gradient-hero);
            color: var(--foreground);
        }

        .page{
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .top{
            background: rgba(255,255,255,0.70);
            border-bottom: 1px solid var(--border);
            box-shadow: var(--shadow-soft);
            backdrop-filter: blur(8px);
        }

        .topInner{
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px 16px 14px 16px;
        }

        .title{
            font-weight: 800;
            font-size: 18px;
            letter-spacing: -0.01em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ver{
            font-weight: 700;
            font-size: 12px;
            color: var(--accent-foreground);
            background: rgba(255,255,255,0.65);
            border: 1px solid var(--border);
            padding: 2px 8px;
            border-radius: 9999px;
        }

        .desc{
            margin-top: 8px;
            color: var(--muted-foreground);
            font-size: 13px;
            line-height: 1.55;
        }

        .desc em{
            font-style: normal;
            color: var(--accent-foreground);
            background: rgba(255,255,255,0.65);
            border: 1px solid var(--border);
            padding: 2px 8px;
            border-radius: 9999px;
            font-weight: 600;
        }

        .main{
            flex: 1;
            min-height: 0;
            padding: 14px;
        }

        .frameShell{
            height: 100%;
            max-width: 1200px;
            margin: 0 auto;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            background: var(--card);
            box-shadow: var(--shadow-soft);
            position: relative;
        }

        #hbDemoFrame{
            width: 100%;
            height: 100%;
            border: 0;
            display: block;
        }

        #hbOverlay{
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        #hbOverlay svg{
            width: 100%;
            height: 100%;
            display: block;
        }

        .hbRect{
            fill: rgba(255,255,255,0.0);
            stroke: var(--primary);
            stroke-width: 1.2;
            opacity: 0.95;
        }

        .hbLine{
            fill: none;
            stroke: var(--primary);
            stroke-width: 1.2;
            stroke-linecap: round;
            stroke-linejoin: round;
            opacity: 0.85;
        }

        .hbDot{
            fill: var(--primary);
            stroke: rgba(255,255,255,0.95);
            stroke-width: 2;
        }

        @media (max-width: 768px){
            .topInner{
                padding: 14px 12px 12px 12px;
            }
            .title{
                font-size: 16px;
            }
            .main{
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class='page'>
        <div class='top'>
            <div class='topInner'>
                <div class='title'>Görünüm Ayarları</div>
                <div class='desc'>
                    Çalışacağınız ekranın tema (renk/zemin/çerçeve) seçimini yaparsınız.<br>
                    Üst Satır ve Buton Açıklamalarının yazı tipini ve boyutunu ayarlarsınız.<br>
                    <em>Lütfen ekrandaki Görünüm Ayarları butonuna basınız</em>
                </div>
            </div>
        </div>

        <div class='main'>
            <div class='frameShell'>
                <iframe id='hbDemoFrame' title='DrHastaBasi (Özelleştir)' src='' allow='clipboard-read; clipboard-write'></iframe>
                <div id='hbOverlay' aria-hidden='true'></div>
            </div>
        </div>

    </div>

    <script>
        'use strict';


        function __hb_parentOverlayEnsure(){
            var ov = document.getElementById('hbOverlay');
            if(!ov){
                return null;
            }
            ov.style.pointerEvents = 'none';

            var svg = ov.querySelector('svg#hbParentOverlaySvg');
            if(svg){
                return svg;
            }

            svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('id', 'hbParentOverlaySvg');
            svg.style.position = 'absolute';
            svg.style.inset = '0';
            svg.style.width = '100%';
            svg.style.height = '100%';
            svg.style.pointerEvents = 'none';
            ov.appendChild(svg);
            return svg;
        }

        function __hb_parentOverlayClear(){
            var svg = __hb_parentOverlayEnsure();
            if(!svg){
                return;
            }
            while(svg.firstChild){
                svg.removeChild(svg.firstChild);
            }
        }

        function __hb_parentOverlayDrawLine(x1, y1, x2, y2){
            var svg = __hb_parentOverlayEnsure();
            if(!svg){
                return;
            }

            var w = svg.clientWidth || svg.parentNode.clientWidth || 1;
            var h = svg.clientHeight || svg.parentNode.clientHeight || 1;
            svg.setAttribute('viewBox', '0 0 ' + w + ' ' + h);

            var p = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            p.setAttribute('d', 'M ' + x1.toFixed(1) + ' ' + y1.toFixed(1) + ' L ' + x2.toFixed(1) + ' ' + y2.toFixed(1));
            p.setAttribute('fill', 'none');
            p.setAttribute('stroke', 'rgba(34,197,94,0.92)');
            p.setAttribute('stroke-width', '3.2');
            p.setAttribute('stroke-linecap', 'round');
            svg.appendChild(p);
        }

        function __hb_parentOverlayDrawEndRing(cx, cy){
            var svg = __hb_parentOverlayEnsure();
            if(!svg){
                return;
            }

            var c = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            c.setAttribute('cx', String(cx.toFixed(1)));
            c.setAttribute('cy', String(cy.toFixed(1)));
            c.setAttribute('r', '10');
            c.setAttribute('fill', 'none');
            c.setAttribute('stroke', 'rgba(34,197,94,0.92)');
            c.setAttribute('stroke-width', '3');
            svg.appendChild(c);
        }

        function __hb_linkCircleToThemeButton(fr){

            if(!fr || !fr.contentWindow || !fr.contentWindow.document){
                return false;
            }

            var d = fr.contentWindow.document;

            var btn = d.getElementById('hbOzGorunum');
            if(!btn){
                return false;
            }

            btn.addEventListener('click', function(){

                if(typeof __hb_parentOverlayClear === 'function'){
                    __hb_parentOverlayClear();
                }
            }, { once: true });


            var ring = d.getElementById('__hb_doctorGear_ring');
            if(!ring){
                return false;
            }

            var ringRect = ring.getBoundingClientRect();
            var btnRect = btn.getBoundingClientRect();

            if(!(ringRect.width > 2 && ringRect.height > 2 && btnRect.width > 2 && btnRect.height > 2)){
                return false;
            }

            var frRect = fr.getBoundingClientRect();

            var cx = frRect.left + ringRect.left + ringRect.width / 2;
            var cy = frRect.top + ringRect.top + ringRect.height / 2;
            var r  = ringRect.width / 2;

            var tx = frRect.left + btnRect.left + btnRect.width / 2;
            var ty = frRect.top + btnRect.top + btnRect.height / 2;

            var dx = tx - cx;
            var dy = ty - cy;
            var len = Math.sqrt(dx*dx + dy*dy);
            if(!len || !isFinite(len)){
                return false;
            }

            var ux = dx / len;
            var uy = dy / len;

            var sx = cx + ux * r;
            var sy = cy + uy * r;

            var ov = document.getElementById('hbOverlay');
            if(ov){
                var ovRect = ov.getBoundingClientRect();
                sx = sx - ovRect.left;
                sy = sy - ovRect.top;
                tx = tx - ovRect.left;
                ty = ty - ovRect.top;
            }

            __hb_parentOverlayClear();
            __hb_parentOverlayDrawLine(sx, sy, tx, ty);
            __hb_parentOverlayDrawEndRing(tx, ty);

            return true;
        }
        function __hb_injectDoctorGearRing(fr){
            var doc;
            try{ doc = fr.contentDocument; }catch(e){ return false; }
            if(!doc || !doc.body){ return false; }

            var host = doc.getElementById('__hb_help_overlay_root');
            if(!host){
                host = doc.createElement('div');
                host.id = '__hb_help_overlay_root';
                host.style.position = 'fixed';
                host.style.inset = '0';
                host.style.zIndex = '2147483647';
                host.style.pointerEvents = 'none';
                doc.body.appendChild(host);
            }

            var ring = doc.getElementById('__hb_doctorGear_ring');
            if(!ring){
                ring = doc.createElement('div');
                ring.id = '__hb_doctorGear_ring';
                ring.style.position = 'fixed';
                ring.style.border = '3px solid var(--bilmed-primary-bg, #22c55e)';
                ring.style.borderRadius = '999px';
                ring.style.boxSizing = 'border-box';
                ring.style.pointerEvents = 'none';
                ring.style.transform = 'translate(-50%,-50%)';
                host.appendChild(ring);
            }

            function place(){
                var gear = doc.getElementById('doctorGear');
                if(!gear){
                    ring.style.display = 'none';
                    return;
                }

                var r = gear.getBoundingClientRect();
                var pad = 10;
                var s = Math.max(r.width, r.height) + pad * 2;

                ring.style.left = (r.left + r.width / 2) + 'px';
                ring.style.top  = (r.top  + r.height / 2) + 'px';
                ring.style.width  = s + 'px';
                ring.style.height = s + 'px';
                ring.style.display = 'block';
            }

            place();
            setTimeout(place, 200);
            setTimeout(place, 600);
            setTimeout(place, 1200);

            try{
                doc.defaultView.addEventListener('resize', place, { passive: true });
                doc.defaultView.addEventListener('scroll', place, { passive: true });
            }catch(e){}

            return true;
        }

        function __hb_init(){
            var fr = document.getElementById('hbDemoFrame');
            if(!fr){
                return;
            }

            var url = '../DrHastaBasi.html?hbStart=ozellestir&hbMode=customize&hbOpen=ozellestir&openCustomize=1';
            fr.src = url;

            fr.addEventListener('load', function(){
                var tries = 0;

                try{
                    __hb_injectDoctorGearRing(fr);
                    //try{ __hb_linkCircleToThemeButton(fr); }catch(e){alert(e)}

                }catch(e){}

                function __hb_tryOpen(){
                    tries++;


                    try{
                        if(fr.contentWindow && fr.contentWindow.document){
                            var d = fr.contentWindow.document;
                            var el = d.getElementById('doctorGear');

                            if(el && typeof el.click === 'function'){
                                el.click();
                                return true;
                            }
                        }
                    }catch(e){}

                    return false;
                }

                var ok = __hb_tryOpen();
                if(ok){
                    try{ __hb_linkCircleToThemeButton(fr); }catch(e){}

                    return;
                }


            });}

        if(document.readyState === 'loading'){
            document.addEventListener('DOMContentLoaded', __hb_init);
        }else{
            __hb_init();
        }
    </script>

</body>
</html>
