<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Merkez Alan</title>
<style>
  body{
    margin:0;
    height:100vh;
    overflow:hidden;
    background:#000;
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  }
  #hbFrame{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    border:0;
    background:#fff;
  }
</style>
</head>
<body>

<iframe id="hbFrame" src="../DrHastaBasi.html"></iframe>

<script>
(function(){
  var iframeEl = document.getElementById('hbFrame');

  function inject(){
    var doc;
    try{ doc = iframeEl.contentDocument; }catch(e){ return; }
    if(!doc || !doc.body) return;

    var host = doc.getElementById('__hb_help_overlay_root');
    if(!host){
      host = doc.createElement('div');
      host.id = '__hb_help_overlay_root';
      host.style.position = 'fixed';
      host.style.inset = '0';
      host.style.zIndex = '2147483647';
      host.style.pointerEvents = 'none';
      doc.body.appendChild(host);
    }

    function makeBox(id){
      var el = doc.getElementById(id);
      if(!el){
        el = doc.createElement('div');
        el.id = id;
        el.style.position = 'fixed';
        el.style.border = '3px solid #22c55e';
        el.style.borderRadius = '14px';
        el.style.boxSizing = 'border-box';
        el.style.pointerEvents = 'none';
        host.appendChild(el);
      }
      return el;
    }

    var centerBox   = makeBox('__hb_center_box');
    var dashTopBox  = makeBox('__hb_dash_top_box');

    // Row2: Gosterge Paneli ikonu (en sagdan ikinci) => hbTopDashBtn
    var gpRing = doc.getElementById('__hb_gp_ring');
    if(!gpRing){
      gpRing = doc.createElement('div');
      gpRing.id = '__hb_gp_ring';
      gpRing.style.position = 'fixed';
      gpRing.style.border = '3px solid #16a34a';
      gpRing.style.borderRadius = '999px';
      gpRing.style.boxSizing = 'border-box';
      gpRing.style.pointerEvents = 'none';
      gpRing.style.transform = 'translate(-50%,-50%)';
      host.appendChild(gpRing);
    }

    function place(){
      // 1) Ana dashboard / merkez alan
      var center = doc.getElementById('hbDashboard') ||
                   doc.querySelector('.hbDashboard, #hbCenter, .hbCenter, [data-hb-center]');
      if(center){
        var r = center.getBoundingClientRect();
        centerBox.style.left = r.left + 'px';
        centerBox.style.top = r.top + 'px';
        centerBox.style.width = r.width + 'px';
        centerBox.style.height = r.height + 'px';
        centerBox.style.display = 'block';
      }else{
        centerBox.style.display = 'none';
      }

      // 2) Sag ust dashboard/ozet alani (varsa)
      var dashTop = doc.getElementById('hbDashTop') ||
                    doc.querySelector('.hbDashTop, #hbDashboardTop, [data-hb-dashboard-top]');
      if(dashTop){
        var r2 = dashTop.getBoundingClientRect();
        dashTopBox.style.left = r2.left + 'px';
        dashTopBox.style.top = r2.top + 'px';
        dashTopBox.style.width = r2.width + 'px';
        dashTopBox.style.height = r2.height + 'px';
        dashTopBox.style.display = 'block';
      }else{
        dashTopBox.style.display = 'none';
      }

      // 3) Gosterge Paneli ikonu â€“ cember (hbTopDashBtn)
      var gpBtn = doc.getElementById('hbTopDashBtn');
      if(gpBtn){
        var r3 = gpBtn.getBoundingClientRect();
        var pad = 8;
        var s = Math.max(r3.width, r3.height) + pad*2;
        gpRing.style.left = (r3.left + r3.width/2) + 'px';
        gpRing.style.top  = (r3.top  + r3.height/2) + 'px';
        gpRing.style.width = s + 'px';
        gpRing.style.height = s + 'px';
        gpRing.style.display = 'block';
      }else{
        gpRing.style.display = 'none';
      }
    }

    place();
    setTimeout(place, 200);
    setTimeout(place, 600);
    setTimeout(place, 1200);

    try{
      doc.defaultView.addEventListener('resize', place, {passive:true});
      doc.defaultView.addEventListener('scroll', place, {passive:true});
    }catch(e){}
  }

  iframeEl.addEventListener('load', inject);
})();
</script>

</body>
</html>
